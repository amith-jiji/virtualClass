{% extends 'index.html'%}
{% load static %}

{% block title %} Login {% endblock %}
{% block link %}
        <link rel="stylesheet" type="text/css" href="{% static 'form.css' %}">
{% endblock %}


{% block content %}
    <script>
    if ( window.history.replaceState ) {
      window.history.replaceState( null, null, window.location.href );
    }
    (function(window, location) {
    history.replaceState(null, document.title, location.pathname+"#!/stealingyourhistory");
    history.pushState(null, document.title, location.pathname);

    window.addEventListener("popstate", function() {
      if(location.hash === "#!/stealingyourhistory") {
            history.replaceState(null, document.title, location.pathname);
            setTimeout(function(){
              location.replace("{%url 'home' %}");
            },0);
      }
    }, false);
    }(window, location));
    </script>
    <div class="container mt-4"  align="center" style="width:400px;">
    <form method="POST">
        {% csrf_token %}
        <p id="title" class="h4 mb-4 text-secondary text-center">Login</p>

        <p><input type="text" name="username" autofocus="" required="" id="id_username" placeholder="username"></p>

        <p><input type="password" name="password" required="" id="id_password" placeholder="password"></p>

        {% if form.non_field_errors %}
            <div class="alert alert-danger" role="alert">
            {% for error in form.non_field_errors %}
                <p>{{ error }}</p>
            {% endfor %}
            </div>
        {% endif %}

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-danger" role="alert">
                    <p style="color: red">{{ message }}</p>
                </div>
            {% endfor %}
        {% endif %}

        <button id="pagebutton" >Sign in</button>
    </form>    </div>
{% endblock %}