{% extends 'index.html'%}
{% load static %}

{% block title %} Dashboard {% endblock %}

{% block link %}
        <link rel="stylesheet" type="text/css" href="{% static 'login.css' %}">
{% endblock %}

{% block nav_content%}
<a class="navbar-brand" href="{%url 'home' %}">virtual <b>CLASS</b></a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                        <span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="collapsibleNavbar">
    <ul class="navbar-nav ml-auto">
        <li class="nav-item">
            <a class="nav-link" href="{%url 'dashboard' %}">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{%url 'create_class' %}">Create Class</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{%url 'join_class' %}">Join Class</a>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              {{ user.username }}
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="{%url 'logout' %}">Logout</a>
            </div>
        </li>
    </ul>
</div>
{% endblock %}

{% block content%}
    <script>
    $(document).ready(function(){
        $(".card-deck:empty").closest('.classlist').hide();
        if ($('#cdeck').is(':empty') && $('#jdeck').is(':empty')) {
                $(".noclass").show();
            }
    });
    </script>
    <p></p>
    <div class="classlist">
    <p class="h4 mb-4 text-secondary text-center"> Created Classes</p>
    <div class="card-deck" id="cdeck">{% for class in all_objects %}
        <div class="col-auto mb-3">
            <div class="card mb-3 bg-light" style="width: 13rem; height: 15rem;">
                <div class="card-header text-center"><a class="stretched-link" href="{%url 'class_page' class.code %}">{{ class.classes }}</a></div>

                <div class="card-body text-center">
                    <h6 class="card-title">SUBJECT</h6>
                    <p class="card-text text-muted">{{ class.subject }}</p>
                    <h6 class="card-title">TEACHER</h6>
                    <p class="card-text text-muted">{{ class.teacher }}</p>
                </div>
            </div>
        </div>
        {% endfor %}</div>
        </div>

    <div class="classlist">
    <p class="h4 mb-4 text-secondary text-center"> Joined Classes</p>
    <div class="card-deck" id="jdeck">{% for class in all_classes %}
        <div class="col-auto mb-3">
            <div class="card mb-3 bg-light" style="width: 13rem; height: 15rem;">
                <div class="card-header text-center"><a class="stretched-link" href="{%url 'join_page' class.code %}">{{ class.classes }}</a></div>

                <div class="card-body text-center">
                    <h6 class="card-title">SUBJECT</h6>
                    <p class="card-text text-muted">{{ class.subject }}</p>
                    <h6 class="card-title">TEACHER</h6>
                    <p class="card-text text-muted">{{ class.teacher }}</p>
                </div>
            </div>
        </div>
        {% endfor %}</div>
    </div>

    <div class="noclass" style="display:none">
        <p class="p-5 h6 text-secondary text-center"> You haven't created or joined a class yet</p>
    </div>
{% endblock %} 

